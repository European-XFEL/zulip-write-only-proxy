{% macro rel_url(url, prefix=request.scope.get("root_path")) -%} {# Add prefix
to relative URLs when behind proxy #} {{[prefix, url] | join('/') |
replace('//', '/')}} {%- endmacro %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ZWOP</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="{{rel_url('/static/main.css')}}"
      rel="stylesheet"
      type="text/css"
    />
    <script defer src="{{rel_url('/static/htmx.min.js')}}"></script>
    <meta name="htmx-config" content='{"methodsThatUseUrlParams": ["post"]}' />
  </head>
  <body class="max-w-screen-lg mx-auto">
    {% block navbar %} {% include 'fragments/navbar.html' %} {% endblock %}
    <div id="content" class="flex flex-col gap-4 md:gap-6 px-4 sm:px-6 md:px-8">
      {% block content %} {% endblock %}
    </div>
    <script>
      document.body.addEventListener("htmx:beforeOnLoad", function (evt) {
        if ([403, 401].includes(evt.detail.xhr.status)) {
          evt.detail.shouldSwap = true;
          evt.detail.isError = false;
        }
      });
    </script>
  </body>
</html>
